@base <http://example.org/smartphone/mapping/> .
@prefix rr: <http://www.w3.org/ns/r2rml#> .
@prefix rml: <http://semweb.mmlab.be/ns/rml#> .
@prefix ql: <http://semweb.mmlab.be/ns/ql#> .
@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> .
@prefix xsd: <http://www.w3.org/2001/XMLSchema#> .
@prefix sp: <http://example.org/smartphone#> .

# region SMARTPHONE

<#SmartphoneMapping> a rr:TriplesMap ;
    rml:logicalSource [
        rml:source "data/phones.json" ;
        rml:referenceFormulation ql:JSONPath ;
        rml:iterator "$[*]"
    ] ;
    rr:subjectMap [
        rr:template "http://example.org/smartphone/instance/phone/{phone_id}" ;
        rr:class sp:Smartphone
    ] ;
    rr:predicateObjectMap [ rr:predicate rdfs:label ; rr:objectMap [ rml:reference "phone_name" ] ] ;
    rr:predicateObjectMap [ rr:predicate sp:phoneName ; rr:objectMap [ rml:reference "phone_name" ] ] ;
    rr:predicateObjectMap [ rr:predicate sp:releaseYear ; rr:objectMap [ rml:reference "year" ; rr:datatype xsd:integer ] ] ;
    rr:predicateObjectMap [ rr:predicate sp:hasBrand ; rr:objectMap [ rr:template "http://example.org/smartphone/instance/brand/{brand}" ] ] ;
    # Display
    rr:predicateObjectMap [ rr:predicate sp:displayType ; rr:objectMap [ rml:reference "display_type" ] ] ;
    rr:predicateObjectMap [ rr:predicate sp:displayResolution ; rr:objectMap [ rml:reference "display_resolution" ] ] ;
    rr:predicateObjectMap [ rr:predicate sp:screenSizeInches ; rr:objectMap [ rml:reference "screen_size_inches" ; rr:datatype xsd:decimal ] ] ;
    rr:predicateObjectMap [ rr:predicate sp:refreshRateHz ; rr:objectMap [ rml:reference "refresh_rate_hz" ; rr:datatype xsd:integer ] ] ;
    # Platform
    rr:predicateObjectMap [ rr:predicate sp:operatingSystem ; rr:objectMap [ rml:reference "os" ] ] ;
    rr:predicateObjectMap [ rr:predicate sp:processorName ; rr:objectMap [ rml:reference "chipset" ] ] ;
    # Camera
    rr:predicateObjectMap [ rr:predicate sp:cameraDescription ; rr:objectMap [ rml:reference "main_camera_desc" ] ] ;
    rr:predicateObjectMap [ rr:predicate sp:mainCameraMP ; rr:objectMap [ rml:reference "main_camera_mp" ; rr:datatype xsd:integer ] ] ;
    rr:predicateObjectMap [ rr:predicate sp:frontCameraMP ; rr:objectMap [ rml:reference "selfie_camera_mp" ; rr:datatype xsd:integer ] ] ;
    # Battery
    rr:predicateObjectMap [ rr:predicate sp:batteryCapacityMah ; rr:objectMap [ rml:reference "battery_mah" ; rr:datatype xsd:integer ] ] ;
    # Body
    rr:predicateObjectMap [ rr:predicate sp:dimensions ; rr:objectMap [ rml:reference "dimensions" ] ] ;
    rr:predicateObjectMap [ rr:predicate sp:weightGrams ; rr:objectMap [ rml:reference "weight_grams" ; rr:datatype xsd:decimal ] ] ;
    rr:predicateObjectMap [ rr:predicate sp:ipRating ; rr:objectMap [ rml:reference "build" ] ] ;
    # Network
    rr:predicateObjectMap [ rr:predicate sp:networkTechnology ; rr:objectMap [ rml:reference "network_technology" ] ] ;
    rr:predicateObjectMap [ rr:predicate sp:supports5G ; rr:objectMap [ rml:reference "supports_5g" ; rr:datatype xsd:boolean ] ] ;
    rr:predicateObjectMap [ rr:predicate sp:supportsNFC ; rr:objectMap [ rml:reference "nfc" ; rr:datatype xsd:boolean ] ] ;
    rr:predicateObjectMap [ rr:predicate sp:announcedDate ; rr:objectMap [ rml:reference "announced" ] ] .

# endregion

# region BRAND

<#BrandMapping> a rr:TriplesMap ;
    rml:logicalSource [
        rml:source "data/phones.json" ;
        rml:referenceFormulation ql:JSONPath ;
        rml:iterator "$[*]"
    ] ;
    rr:subjectMap [
        rr:template "http://example.org/smartphone/instance/brand/{brand}" ;
        rr:class sp:Brand
    ] ;
    rr:predicateObjectMap [ rr:predicate rdfs:label ; rr:objectMap [ rml:reference "brand" ] ] ;
    rr:predicateObjectMap [ rr:predicate sp:brandName ; rr:objectMap [ rml:reference "brand" ] ] .

# endregion

# region VARIANT

<#VariantMapping> a rr:TriplesMap ;
    rml:logicalSource [
        rml:source "data/variants.json" ;
        rml:referenceFormulation ql:JSONPath ;
        rml:iterator "$[*]"
    ] ;
    rr:subjectMap [
        rr:template "http://example.org/smartphone/instance/variant/{variant_id}" ;
        rr:class sp:Variant
    ] ;
    rr:predicateObjectMap [ rr:predicate rdfs:label ; rr:objectMap [ rml:reference "variant_text" ] ] ;
    rr:predicateObjectMap [ rr:predicate sp:storageGB ; rr:objectMap [ rml:reference "storage_gb" ; rr:datatype xsd:integer ] ] ;
    rr:predicateObjectMap [ rr:predicate sp:ramGB ; rr:objectMap [ rml:reference "ram_gb" ; rr:datatype xsd:integer ] ] ;
    rr:predicateObjectMap [ rr:predicate sp:variantOf ; rr:objectMap [ rr:template "http://example.org/smartphone/instance/phone/{phone_id}" ] ] .

# endregion

# region PRICE

<#PriceMapping> a rr:TriplesMap ;
    rml:logicalSource [
        rml:source "data/prices.json" ;
        rml:referenceFormulation ql:JSONPath ;
        rml:iterator "$[*]"
    ] ;
    rr:subjectMap [
        rr:template "http://example.org/smartphone/instance/price/{price_id}" ;
        rr:class sp:Price
    ] ;
    rr:predicateObjectMap [ rr:predicate sp:priceValue ; rr:objectMap [ rml:reference "value" ; rr:datatype xsd:decimal ] ] ;
    rr:predicateObjectMap [ rr:predicate sp:currency ; rr:objectMap [ rml:reference "currency" ] ] ;
    rr:predicateObjectMap [ rr:predicate sp:store ; rr:objectMap [ rml:reference "store" ] ] .

<#VariantPriceMapping> a rr:TriplesMap ;
    rml:logicalSource [
        rml:source "data/prices.json" ;
        rml:referenceFormulation ql:JSONPath ;
        rml:iterator "$[*]"
    ] ;
    rr:subjectMap [ rr:template "http://example.org/smartphone/instance/variant/{variant_id}" ] ;
    rr:predicateObjectMap [ rr:predicate sp:hasPrice ; rr:objectMap [ rr:template "http://example.org/smartphone/instance/price/{price_id}" ] ] .

# endregion

# region REVIEW

<#ReviewMapping> a rr:TriplesMap ;
    rml:logicalSource [
        rml:source "data/reviews.json" ;
        rml:referenceFormulation ql:JSONPath ;
        rml:iterator "$[*]"
    ] ;
    rr:subjectMap [
        rr:template "http://example.org/smartphone/instance/review/{review_id}" ;
        rr:class sp:Review
    ] ;
    rr:predicateObjectMap [ rr:predicate sp:reviewText ; rr:objectMap [ rml:reference "text" ] ] ;
    rr:predicateObjectMap [ rr:predicate sp:reviewDate ; rr:objectMap [ rml:reference "date" ] ] ;
    rr:predicateObjectMap [ rr:predicate sp:reviewOf ; rr:objectMap [ rr:template "http://example.org/smartphone/instance/phone/{phone_id}" ] ] ;
    rr:predicateObjectMap [ rr:predicate sp:writtenBy ; rr:objectMap [ rr:template "http://example.org/smartphone/instance/user/{user_id}" ] ] .

# endregion

# region USER

<#UserMapping> a rr:TriplesMap ;
    rml:logicalSource [
        rml:source "data/users.json" ;
        rml:referenceFormulation ql:JSONPath ;
        rml:iterator "$[*]"
    ] ;
    rr:subjectMap [
        rr:template "http://example.org/smartphone/instance/user/{user_id}" ;
        rr:class sp:User
    ] ;
    rr:predicateObjectMap [ rr:predicate rdfs:label ; rr:objectMap [ rml:reference "username" ] ] ;
    rr:predicateObjectMap [ rr:predicate sp:username ; rr:objectMap [ rml:reference "username" ] ] .

# endregion