@prefix : <http://example.org/smartphone#> .
@prefix owl: <http://www.w3.org/2002/07/owl#> .
@prefix rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .
@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> .
@prefix xsd: <http://www.w3.org/2001/XMLSchema#> .

<http://example.org/smartphone> a owl:Ontology ;
    rdfs:label "Smartphone Knowledge Graph Ontology" .

# =============================================================================
# CLASSES - Base hierarchy
# =============================================================================

:Smartphone a owl:Class ;
    rdfs:label "Smartphone" .

:Brand a owl:Class ;
    rdfs:label "Brand" .

:User a owl:Class ;
    rdfs:label "User" .

:Review a owl:Class ;
    rdfs:label "Review" .

# =============================================================================
# DEFINED CLASSES - Inferred membership via restrictions
# =============================================================================

# Budget phone: price < 200 USD
:BudgetPhone a owl:Class ;
    owl:equivalentClass [
        a owl:Class ;
        owl:intersectionOf (
            :Smartphone
            [ a owl:Restriction ; owl:onProperty :hasPrice ; owl:someValuesFrom [
                a rdfs:Datatype ;
                owl:onDatatype xsd:float ;
                owl:withRestrictions ( [ xsd:maxExclusive 200.0 ] )
            ] ]
        )
    ] ;
    rdfs:subClassOf :Smartphone .

# Mid-range phone: 200 <= price < 600 USD
:MidRangePhone a owl:Class ;
    owl:equivalentClass [
        a owl:Class ;
        owl:intersectionOf (
            :Smartphone
            [ a owl:Restriction ; owl:onProperty :hasPrice ; owl:someValuesFrom [
                a rdfs:Datatype ;
                owl:onDatatype xsd:float ;
                owl:withRestrictions ( [ xsd:minInclusive 200.0 ] [ xsd:maxExclusive 600.0 ] )
            ] ]
        )
    ] ;
    rdfs:subClassOf :Smartphone .

# Flagship phone: price >= 600 USD
:FlagshipPhone a owl:Class ;
    owl:equivalentClass [
        a owl:Class ;
        owl:intersectionOf (
            :Smartphone
            [ a owl:Restriction ; owl:onProperty :hasPrice ; owl:someValuesFrom [
                a rdfs:Datatype ;
                owl:onDatatype xsd:float ;
                owl:withRestrictions ( [ xsd:minInclusive 600.0 ] )
            ] ]
        )
    ] ;
    rdfs:subClassOf :Smartphone .

# High-RAM phone: RAM >= 8GB
:HighRAMPhone a owl:Class ;
    owl:equivalentClass [
        a owl:Class ;
        owl:intersectionOf (
            :Smartphone
            [ a owl:Restriction ; owl:onProperty :hasRAM ; owl:someValuesFrom [
                a rdfs:Datatype ;
                owl:onDatatype xsd:string ;
                owl:withRestrictions ( [ xsd:pattern "^(8|10|12|16|18|24).*" ] )
            ] ]
        )
    ] ;
    rdfs:subClassOf :Smartphone .

# Positive review: rating >= 4
:PositiveReview a owl:Class ;
    owl:equivalentClass [
        a owl:Class ;
        owl:intersectionOf (
            :Review
            [ a owl:Restriction ; owl:onProperty :hasRating ; owl:someValuesFrom [
                a rdfs:Datatype ;
                owl:onDatatype xsd:integer ;
                owl:withRestrictions ( [ xsd:minInclusive 4 ] )
            ] ]
        )
    ] ;
    rdfs:subClassOf :Review .

# Negative review: rating <= 2
:NegativeReview a owl:Class ;
    owl:equivalentClass [
        a owl:Class ;
        owl:intersectionOf (
            :Review
            [ a owl:Restriction ; owl:onProperty :hasRating ; owl:someValuesFrom [
                a rdfs:Datatype ;
                owl:onDatatype xsd:integer ;
                owl:withRestrictions ( [ xsd:maxInclusive 2 ] )
            ] ]
        )
    ] ;
    rdfs:subClassOf :Review .

# =============================================================================
# OBJECT PROPERTIES
# =============================================================================

:hasBrand a owl:ObjectProperty, owl:FunctionalProperty ;
    rdfs:domain :Smartphone ;
    rdfs:range :Brand .

:hasReview a owl:ObjectProperty ;
    rdfs:domain :Smartphone ;
    rdfs:range :Review ;
    owl:inverseOf :reviewOf .

:reviewOf a owl:ObjectProperty, owl:FunctionalProperty ;
    rdfs:domain :Review ;
    rdfs:range :Smartphone .

:writtenBy a owl:ObjectProperty, owl:FunctionalProperty ;
    rdfs:domain :Review ;
    rdfs:range :User ;
    owl:inverseOf :wroteReview .

:wroteReview a owl:ObjectProperty ;
    rdfs:domain :User ;
    rdfs:range :Review .

# =============================================================================
# DATATYPE PROPERTIES - Smartphone (from reviews)
# =============================================================================

:hasName a owl:DatatypeProperty, owl:FunctionalProperty ;
    rdfs:domain [ owl:unionOf ( :Smartphone :Brand :User ) ] ;
    rdfs:range xsd:string .

:hasModelKey a owl:DatatypeProperty, owl:FunctionalProperty ;
    rdfs:comment "Normalized model key for linking reviews to specs" ;
    rdfs:domain :Smartphone ;
    rdfs:range xsd:string .

:hasPrice a owl:DatatypeProperty, owl:FunctionalProperty ;
    rdfs:domain :Smartphone ;
    rdfs:range xsd:float .

# =============================================================================
# DATATYPE PROPERTIES - Smartphone specs (from specs dataset)
# =============================================================================

:hasRAM a owl:DatatypeProperty, owl:FunctionalProperty ;
    rdfs:domain :Smartphone ;
    rdfs:range xsd:string .

:hasProcessor a owl:DatatypeProperty, owl:FunctionalProperty ;
    rdfs:domain :Smartphone ;
    rdfs:range xsd:string .

:hasBattery a owl:DatatypeProperty, owl:FunctionalProperty ;
    rdfs:domain :Smartphone ;
    rdfs:range xsd:string .

:hasScreenSize a owl:DatatypeProperty, owl:FunctionalProperty ;
    rdfs:domain :Smartphone ;
    rdfs:range xsd:string .

:hasWeight a owl:DatatypeProperty, owl:FunctionalProperty ;
    rdfs:domain :Smartphone ;
    rdfs:range xsd:string .

:hasFrontCamera a owl:DatatypeProperty, owl:FunctionalProperty ;
    rdfs:domain :Smartphone ;
    rdfs:range xsd:string .

:hasBackCamera a owl:DatatypeProperty, owl:FunctionalProperty ;
    rdfs:domain :Smartphone ;
    rdfs:range xsd:string .

:hasLaunchYear a owl:DatatypeProperty, owl:FunctionalProperty ;
    rdfs:domain :Smartphone ;
    rdfs:range xsd:integer .

# =============================================================================
# DATATYPE PROPERTIES - Review
# =============================================================================

:hasRating a owl:DatatypeProperty, owl:FunctionalProperty ;
    rdfs:domain :Review ;
    rdfs:range xsd:integer .

:hasReviewText a owl:DatatypeProperty, owl:FunctionalProperty ;
    rdfs:domain :Review ;
    rdfs:range xsd:string .

:hasSentiment a owl:DatatypeProperty, owl:FunctionalProperty ;
    rdfs:domain :Review ;
    rdfs:range xsd:string .

:hasHelpfulVotes a owl:DatatypeProperty, owl:FunctionalProperty ;
    rdfs:domain :Review ;
    rdfs:range xsd:integer .

:hasReviewDate a owl:DatatypeProperty, owl:FunctionalProperty ;
    rdfs:domain :Review ;
    rdfs:range xsd:date .

:isVerifiedPurchase a owl:DatatypeProperty, owl:FunctionalProperty ;
    rdfs:domain :Review ;
    rdfs:range xsd:boolean .

:hasSource a owl:DatatypeProperty, owl:FunctionalProperty ;
    rdfs:domain :Review ;
    rdfs:range xsd:string .

# Detailed ratings
:hasBatteryRating a owl:DatatypeProperty, owl:FunctionalProperty ;
    rdfs:domain :Review ;
    rdfs:range xsd:integer .

:hasCameraRating a owl:DatatypeProperty, owl:FunctionalProperty ;
    rdfs:domain :Review ;
    rdfs:range xsd:integer .

:hasPerformanceRating a owl:DatatypeProperty, owl:FunctionalProperty ;
    rdfs:domain :Review ;
    rdfs:range xsd:integer .

:hasDesignRating a owl:DatatypeProperty, owl:FunctionalProperty ;
    rdfs:domain :Review ;
    rdfs:range xsd:integer .

:hasDisplayRating a owl:DatatypeProperty, owl:FunctionalProperty ;
    rdfs:domain :Review ;
    rdfs:range xsd:integer .

# =============================================================================
# DATATYPE PROPERTIES - User
# =============================================================================

:hasAge a owl:DatatypeProperty, owl:FunctionalProperty ;
    rdfs:domain :User ;
    rdfs:range xsd:integer .

:hasCountry a owl:DatatypeProperty, owl:FunctionalProperty ;
    rdfs:domain :User ;
    rdfs:range xsd:string .

:hasLanguage a owl:DatatypeProperty, owl:FunctionalProperty ;
    rdfs:domain :User ;
    rdfs:range xsd:string .
